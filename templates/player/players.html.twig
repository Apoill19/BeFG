{% extends 'base.html.twig' %}

{% block title %}Players{% endblock %}

{% block monTitre %}Liste des joueurs{% endblock %}
{% block body %}

{% for message in app.flashes('success') %}
    <div class="alert alert-success">
        {{message}}
    </div>
{% endfor %}

<div class="container">   
    <section class="formFilterbirthDate p-4">
        {{ form_start (form) }}
            <div class="row no-gutters align-items-center text-center">
                <div class="col p-1">            
                    {{ form_row(form.minYearOfBirth) }}
                </div>    
                <div class="col p-1">        
                    {{ form_row(form.maxYearOfBirth) }}
                </div>
                <div class="col-4 ">        
                    <input type="submit" value="rechercher" class="btn btn-info m-2 p-2">
                </div>
            </div>            
        {{ form_end (form) }} 
    </section>    
</div>        

<div class="container mt-4 ">    
    <div class="table table-bordered">    
        <table class="table table-hover">
            <thead class="thead-light">
                {% if admin %}                   
                    <a href="{{ path('admin_ajout_player') }}" class="btn btn-success btn-xs pull-right mt-4"><b>+</b> Add Player</a>
                    {% endif %}    
                <tr>
                    <th></th>
                    <th>Prénom</th>
                    <th>Nom</th>
                    <th>Catégorie</th>
                    <th>Année</th>
                    <th>Role</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
                {%  for player in players %}
                    <tr>
                        <td>
                            <div class="ckbox">
                                <input type="checkbox" id="checkbox1">
                                <label for="checkbox1"></label>
                            </div>
                        </td>
                        <td><strong>{{ player.fname }}</strong></td>
                        <td>{{ player.lname }}</td>
                        <td>{{ player.team.category }}</td>
                        <td>{{ player.yearOfBirth }}</td>
                        <td>{{ player.lname }}</td>
                        {% if admin %}
                        <td>
                            <div class="row">
                                <a class='btn btn-info btn-xs m-1' href="{{ path('admin_modification_player', {'id' : player.id}) }}"><span class="glyphicon glyphicon-edit"></span>Edit</a> 
                            
                                <form method="POST" action="{{ path('admin_suppression_player', {'id' : player.id}) }}" onsubmit="return confirm('êtes-vous sûr de confirmer la suppression ?')">              
                                    <input type="hidden" name="_method" value="delete"> 
                                    <input type="hidden" name="_token" value="{{csrf_token('SUP' ~ player.id)}}"> 
                                    <input type="submit" class="row btn btn-danger btn-xs m-1" value="X"> 
                                </form>
                            </div>
                        </td>
                        {% endif %}
                    </tr>
                {% endfor %}  
        </table>
    </div>
</div>

               
               
          



    <div class="navigation">
        {{ knp_pagination_render(players) }}
    </div>

{% endblock %}
